!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){var e=this;this.mouseX=null,this.mouseY=null,this.DRAW_SIZE=3,this.DRAW_COLOR="#000000",this.DRAW_ALPHA=.9,this.jCanvas=t,this.ctx=this.jCanvas.getContext("2d"),this.finger=[];for(var n=this.finger,o=0;o<10;o++)n[o]={x:0,y:0,x1:0,y1:0};this.jCanvas.addEventListener("mousedown",function(t){return e.onMousedown(t)},!1),this.jCanvas.addEventListener("mousemove",function(t){return e.onMousemove(t)},!1),this.jCanvas.addEventListener("mouseup",function(t){return e.onDrawend(t)},!1),this.jCanvas.addEventListener("mouseout",function(t){return e.onDrawend(t)},!1),this.jCanvas.addEventListener("touchstart",function(t){return e.onTouchstart(t)},!1),this.jCanvas.addEventListener("touchmove",function(t){return e.onTouchmove(t)},!1)}return t.prototype.onMousedown=function(t){if(0===t.button){var e=t.target.getBoundingClientRect(),n=~~(t.clientX-e.left),o=~~(t.clientY-e.top);this.mouseDraw(n,o)}},t.prototype.onMousemove=function(t){if(1===t.buttons||1===t.witch){var e=t.target.getBoundingClientRect(),n=~~(t.clientX-e.left),o=~~(t.clientY-e.top);this.mouseDraw(n,o)}},t.prototype.onDrawend=function(t){this.mouseX=this.mouseY=null},t.prototype.onTouchstart=function(t){t.preventDefault();for(var e=t.target.getBoundingClientRect(),n=(t.clientX,e.left,t.clientY,e.top,this.finger),o=0;o<n.length;o++)n[o].x1=t.touches[o].clientX-e.left,n[o].y1=t.touches[o].clientY-e.top},t.prototype.onTouchmove=function(t){t.preventDefault();for(var e=t.target.getBoundingClientRect(),n=(this.ctx,this.finger),o=0;o<n.length;o++){var i=t.touches[o].clientX-e.left,a=t.touches[o].clientY-e.top;this.draw(n[o].x1,n[o].y1,i,a),n[o].x1=n[o].x=i,n[o].y1=n[o].y=a}},t.prototype.mouseDraw=function(t,e){var n=0,o=0;null===this.mouseX||null===this.mouseY?(n=t,o=e):(n=this.mouseX,o=this.mouseY),this.draw(n,o,t,e),this.mouseX=t,this.mouseY=e},t.prototype.draw=function(t,e,n,o){var i=this.ctx;i.beginPath(),i.globalAlpha=this.DRAW_ALPHA,i.moveTo(t,e),i.globalCompositeOperation=this.getGlobalCompositeOperation(),i.lineTo(n,o),i.lineCap="round",i.lineWidth=2*this.DRAW_SIZE,i.strokeStyle=this.DRAW_COLOR,i.stroke()},t.prototype.getGlobalCompositeOperation=function(){return t.isEraser?"destination-out":"source-over"},t.prototype.clear=function(){this.ctx.clearRect(0,0,this.jCanvas.width,this.jCanvas.height)},t.prototype.getData=function(){return this.jCanvas.toDataURL()},t.prototype.getSize=function(){return this.DRAW_SIZE},t.prototype.setSize=function(t){this.DRAW_SIZE=~~t},t.prototype.setColor=function(t){this.DRAW_COLOR=t},t.isEraser=!1,t}();e.DrawingCanvas=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=function(){function t(t){var e=this;this.BASE_IMAGE_PATH="files/img/base.jpg",this.COLOR_LIST=["#f44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B","#000000","#ffffff"],this.jBoard=t,this.jBaseCanvas=document.createElement("canvas"),this.jColorCanvas=document.createElement("canvas"),this.jPalette=document.getElementById("color-palette"),this.jTools=document.getElementById("tools"),this.jSize=document.getElementById("size"),this.jBaseCanvas.id="base-canvas",this.jColorCanvas.id="color-canvas",this.jBoard.appendChild(this.jBaseCanvas),this.jBoard.appendChild(this.jColorCanvas),this.start(),this.setPalette(),this.drawingCanvas=new o.DrawingCanvas(this.jColorCanvas),this.jSize.value=String(this.drawingCanvas.getSize()),this.jSize.addEventListener("change",function(t){return e.onSize(t)}),this.jPalette.addEventListener("click",function(t){return e.onChangeColor(t)}),this.jTools.addEventListener("click",function(t){return e.onClickTool(t)}),this.jPalette.children.item(0).click()}return t.prototype.onClickTool=function(t){var e=t.target,n=e.getAttribute("data-tool");if(t.preventDefault(),null!=n)switch(n){case"eraser":this.onEraser(e);break;case"clear":this.onClear();break;case"download":this.onDownload()}},t.prototype.onSize=function(t){var e=Number(this.jSize.value);this.drawingCanvas.setSize(e)},t.prototype.onEraser=function(t){"active"==t.className?(t.className="",o.DrawingCanvas.isEraser=!1):(t.className="active",o.DrawingCanvas.isEraser=!0)},t.prototype.onClear=function(){confirm("キャンバスをクリアしてもよろしいですか？")&&this.drawingCanvas.clear()},t.prototype.onDownload=function(){var e=this.drawingCanvas.getData(),n=document.createElement("canvas"),o=n.getContext("2d");n.width=this.jBoard.clientWidth,n.height=this.jBoard.clientHeight,t.loadImage(this.BASE_IMAGE_PATH,function(i){o.drawImage(i,0,0),t.loadImage(e,function(e){o.drawImage(e,0,0),t.download(n.toDataURL(),"sample.png")})})},t.prototype.onChangeColor=function(t){var e=t.target.getAttribute("data-color");t.preventDefault(),null!=e&&this.drawingCanvas.setColor(e);for(var n=this.jPalette.children,o=0;o<n.length;++o){var i=n.item(o),a=e==i.getAttribute("data-color")?"active":"";i.className=a}},t.prototype.start=function(){var e=this,n=this.jBaseCanvas,o=n.getContext("2d");t.loadImage(this.BASE_IMAGE_PATH,function(t){e.jBoard.style.width=String(t.width)+"px",e.jBoard.style.height=String(t.height)+"px",e.setSize();var i=n.width/t.width;o.setTransform(i,0,0,i,0,0),o.drawImage(t,0,0)})},t.prototype.setPalette=function(){for(var t="",e=0;e<this.COLOR_LIST.length;++e){var n=this.COLOR_LIST[e];t+='<li data-color="'+n+'" style="background-color:'+n+';">&nbsp;</li>'}this.jPalette.innerHTML=t},t.prototype.setSize=function(){this.jBaseCanvas.width=this.jColorCanvas.width=this.jBoard.clientWidth,this.jBaseCanvas.height=this.jColorCanvas.height=this.jBoard.clientHeight},t.download=function(t,e){var n=document.createElement("a");n.href=t,n.download=e,n.innerText="download",n.click()},t.loadImage=function(t,e){var n=new Image;n.onload=function(t){return e(n)},n.src=t},t.prototype.resize=function(){},t}();e.DrawingColouring=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=document.getElementById("board"),a=new o.DrawingColouring(i);window.addEventListener("resize",function(){a.resize()})}]);